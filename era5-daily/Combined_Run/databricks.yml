bundle:
  name: era5_01_bronze_source_to_staging_run

run_as:
  service_principal_name: 0dbc3b87-0681-43d4-b52e-53bce65fcae5

resources:
  jobs:
    era5_01_bronze_source_to_staging_job:
      name: era5_01_bronze_source_to_staging_job
      schedule:
        # Daily at midnight UTC
        quartz_cron_expression: '0 0 0 * * ?'
        timezone_id: 'UTC'
      tags:
        BRANCH: will_be_set_by_github_action
      tasks:
        - task_key: era5_01_source_to_staging_task
          spark_python_task:
            python_file: src/era5_01_source_to_staging.py
            parameters:
              - --catalog_schema
              - era5_daily_data.bronze_dev
          existing_cluster_id: 0406-134207-et9icx79

# Same workspace for development and production
workspace_host: &workspace_host https://dbc-ad3d47af-affb.cloud.databricks.com/

targets:
  production:
    mode: production
    workspace:
      host: *workspace_host
  development:
    # only difference for development is to not set a cron job
    mode: development
    workspace:
      host: *workspace_host
    resources:
      jobs:
        era5_01_bronze_source_to_staging_job:
          schedule: null
